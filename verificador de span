<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>SpamGuard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --primary: #6366f1;
    --danger: #ef4444;
    --warning: #f59e0b;
    --success: #22c55e;
    --bg: linear-gradient(135deg, #0f172a, #020617);
    --card: rgba(255,255,255,0.08);
    --border: rgba(255,255,255,0.15);
    --text: #e5e7eb;
}

* {
    box-sizing: border-box;
    font-family: "Segoe UI", system-ui, sans-serif;
}

body {
    margin: 0;
    min-height: 100vh;
    background: var(--bg);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    color: var(--text);
}

.container {
    width: 100%;
    max-width: 480px;
    background: var(--card);
    backdrop-filter: blur(12px);
    border-radius: 18px;
    padding: 24px;
    border: 1px solid var(--border);
    box-shadow: 0 25px 50px rgba(0,0,0,0.5);
}

h2 {
    text-align: center;
    margin-bottom: 20px;
    font-weight: 600;
}

label {
    font-size: 13px;
    opacity: 0.8;
}

input, textarea {
    width: 100%;
    margin-top: 6px;
    margin-bottom: 14px;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: rgba(0,0,0,0.35);
    color: white;
    outline: none;
}

textarea {
    height: 120px;
    resize: none;
}

input:focus, textarea:focus {
    border-color: var(--primary);
}

button {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    background: linear-gradient(135deg, var(--primary), #4338ca);
    color: white;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

button:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 25px rgba(99,102,241,0.4);
}

.barra-container {
    width: 100%;
    height: 10px;
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    margin-top: 16px;
    overflow: hidden;
}

.barra {
    height: 100%;
    width: 0%;
    background: var(--success);
    transition: width 0.4s ease, background 0.4s ease;
}

.resultado {
    margin-top: 14px;
    text-align: center;
    font-weight: 600;
}
</style>
</head>

<body>

<div class="container">
    <h2>ðŸ“§ SpamGuard</h2>

    <label>Remetente</label>
    <input id="remetente" placeholder="promo@ofertas.xyz">

    <label>ConteÃºdo do e-mail</label>
    <textarea id="textoEmail" placeholder="Cole o texto do e-mail aqui..."></textarea>

    <button onclick="verificarSpam()">Analisar e-mail</button>

    <div class="barra-container">
        <div id="barra" class="barra"></div>
    </div>

    <div id="resultado" class="resultado"></div>
</div>

<script>
const PALAVRAS_SPAM = {
    "ganhe dinheiro": 5,
    "dinheiro facil": 5,
    "voce ganhou": 4,
    "clique aqui": 3,
    "gratis": 3,
    "promocao": 2,
    "oferta imperdivel": 3,
    "urgente": 2
};

const DOMINIOS_SUSPEITOS = [".xyz", ".top", ".click", ".win", ".free"];
const SCORE_MAX = 25;

function normalizar(t) {
    return t.toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .replace(/[^\w\s]/g, "");
}

function analisarRemetente(r) {
    let s = 0;
    if (!r.includes("@")) return 3;

    const dominio = r.split("@")[1];
    DOMINIOS_SUSPEITOS.forEach(d => {
        if (dominio.endsWith(d)) s += 3;
    });

    if ((r.match(/\d/g) || []).length >= 4) s += 2;
    return s;
}

function heuristicas(t) {
    let s = 0;
    if ((t.match(/!/g) || []).length >= 3) s += 2;
    if ((t.match(/https?:\/\//g) || []).length >= 2) s += 3;
    if (t === t.toUpperCase() && t.trim()) s += 3;
    return s;
}

function verificarSpam() {
    const texto = document.getElementById("textoEmail").value;
    const remetente = document.getElementById("remetente").value;
    const barra = document.getElementById("barra");
    const res = document.getElementById("resultado");

    if (!texto.trim()) {
        res.textContent = "Informe o texto do e-mail.";
        barra.style.width = "0%";
        return;
    }

    let score = 0;
    const tNorm = normalizar(texto);

    for (let p in PALAVRAS_SPAM) {
        if (tNorm.includes(p)) score += PALAVRAS_SPAM[p];
    }

    score += heuristicas(texto);
    score += analisarRemetente(remetente);

    const pct = Math.min(100, Math.round((score / SCORE_MAX) * 100));

    let cor, msg;
    if (pct < 25) {
        cor = "var(--success)";
        msg = "âœ… Baixo risco de spam";
    } else if (pct < 60) {
        cor = "var(--warning)";
        msg = "âš ï¸ PossÃ­vel spam";
    } else {
        cor = "var(--danger)";
        msg = "ðŸš¨ Alto risco de spam";
    }

    barra.style.width = pct + "%";
    barra.style.background = cor;
    res.textContent = `${msg} â€” ${pct}%`;
}
</script>

</body>
</html>
