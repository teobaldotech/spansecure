# Create the single-file Python app (main.py) for download

from pathlib import Path

path = Path("/mnt/data")
file_path = path / "spam_checker_mobile_python_main.py"

code = """from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.textinput import TextInput
from kivy.uix.button import Button
import re

PALAVRAS_SPAM = [
    "ganhe", "dinheiro", "promoÃ§Ã£o", "oferta",
    "clique aqui", "grÃ¡tis", "urgente", "aproveite"
]

LIMITE_SPAM = 5

class SpamChecker(BoxLayout):
    def __init__(self, **kwargs):
        super().__init__(orientation="vertical", padding=15, spacing=10, **kwargs)

        self.add_widget(Label(
            text="Verificador de Spam de E-mail",
            font_size=20
        ))

        self.email_input = TextInput(
            hint_text="Cole o texto do e-mail aqui",
            multiline=True,
            size_hint_y=0.45
        )
        self.add_widget(self.email_input)

        btn = Button(
            text="Verificar Spam",
            size_hint_y=0.15
        )
        btn.bind(on_press=self.verificar)
        self.add_widget(btn)

        self.resultado = Label(text="", font_size=22)
        self.pontos = Label(text="")
        self.add_widget(self.resultado)
        self.add_widget(self.pontos)

    def verificar(self, instance):
        texto = self.email_input.text
        texto_lower = texto.lower()
        score = 0

        for palavra in PALAVRAS_SPAM:
            if palavra in texto_lower:
                score += 2

        if len(re.findall(r'https?://', texto_lower)) > 2:
            score += 3

        if texto.count("!") > 3:
            score += 2

        if texto.strip() and texto == texto.upper():
            score += 3

        if score >= LIMITE_SPAM:
            self.resultado.text = "ðŸš¨ SPAM"
        else:
            self.resultado.text = "âœ… NÃƒO Ã‰ SPAM"

        self.pontos.text = f"PontuaÃ§Ã£o: {score}"


class SpamApp(App):
    def build(self):
        return SpamChecker()


if __name__ == "__main__":
    SpamApp().run()
"""

file_path.write_text(code, encoding="utf-8")

str(file_path)
